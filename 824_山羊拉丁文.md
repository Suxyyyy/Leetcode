[[824.山羊拉丁文]](https://leetcode.cn/problems/goat-latin/description/)

```cpp
class Solution {
public:
    string toGoatLatin(string sentence) {
        string ans = "";
        string s = "";
        vector<string> tmp;
        for(auto c : sentence){
            if(isalpha(c)) s += c;
            else {
                if(!s.empty()){
                    tmp.push_back(s);
                    s = "";
                }
            }
        }
        if(!s.empty()) tmp.push_back(s);
        for(auto &str : tmp){
            if(str[0] == 'a' || str[0] == 'e' || str[0] == 'i' || str[0] == 'o' || str[0] == 'u' || str[0] == 'A' || str[0] == 'E' || str[0] == 'I' || str[0] == 'O' || str[0] == 'U'){
                str += "ma";
            }
            else {
                char temp = str[0];
                for(int i = 1;i < str.size();++i){
                    str[i - 1] = str[i];
                    str[i] = temp;
                }
                str += "ma";
            }
        }
        for(int i = 0;i < tmp.size();++i){
            tmp[i] += string(i + 1,'a');
            ans += tmp[i];
            if(i != tmp.size() - 1)
                ans += ' ';
        }
        return ans;
    }
};
```

### 核心逻辑总结

1. **分词阶段**：
   - 遍历字符串，利用 `isalpha(c)` 识别字母并存入临时字符串 `s`。
   - 遇到非字母字符（空格）时，将单词存入 `vector<string> tmp` 并重置 `s`。
2. **单词转换阶段**：
   - **元音开头**：若单词以 `a, e, i, o, u`（不区分大小写）开头，直接在末尾添加 `"ma"`。
   - **辅音开头**：将首字母移至末尾，再添加 `"ma"`。*注意：代码中使用了一个循环不断交换字符来实现移位，这等同于 `str = str.substr(1) + str[0] + "ma"`。*
3. **索引累加阶段**：
   - 根据单词在句子中的位置 i（从 0 开始），在单词末尾添加 i+1 个字符 `'a'`。
   - 使用空格将处理后的单词重新连接。

### 复杂度分析

#### 1. 时间复杂度：O(N^2)

虽然初步看起来像线性，但由于以下因素，最坏情况下为平方级别：

- **分词与基础转换**：遍历字符串 N（字符串长度）是 O(N)。

- 添加 'a' 的操作：第 i 个单词需要添加 i个 'a'。如果句子很长且单词很多，添加的 'a' 总数服从等差数列求和公式：

  sum_{i=1}^{k} i = k(k+1)/2

  其中 k 是单词数量。在极端情况下（如句子全是单字母单词），k ≈ N/2，因此总操作数接近 O(N^2)。

- **字符串拼接**：`ans += tmp[i]` 在每次循环中都会产生拷贝，总代价也是 O(N_{final})。

#### 2. 空间复杂度：$O(N^2)$

- **临时存储**：`vector<string> tmp` 存储了所有单词。
- **结果字符串**：由于每个单词都要根据其索引增加 `'a'`，结果字符串的总长度会显著大于输入字符串。如果单词数为 k，额外增加的 `'a'` 字符数为 O(k^2)，这也是空间占用的主要增长点。